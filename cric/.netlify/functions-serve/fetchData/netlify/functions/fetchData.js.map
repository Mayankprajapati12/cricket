{
  "version": 3,
  "sources": ["../../../../Desktop/Cric0/cric/netlify/functions/fetchData.js"],
  "sourceRoot": "C:/Users/HP/AppData/Local/Temp/tmp-3464-Q937bfOSkBy1",
  "sourcesContent": ["// netlify/functions/fetchData.js\r\nexports.handler = async function (event) {\r\n  // console.log('evemt:::', event)\r\n  const base_urls = {\r\n    'matches': { base_url: 'https://cricbuzz-cricket.p.rapidapi.com/matches/v1' },\r\n    'scorecard': { base_url: 'https://cricbuzz-cricket.p.rapidapi.com/mcenter/v1' },\r\n  }\r\n  const API_KEY = [process.env.Secret_ryukIDkey, process.env.Secret_oldIDkey];\r\n  const API_HOST = process.env.Secret_apihost\r\n  const { endpoint, service } = event.queryStringParameters;\r\n\r\n  const selectedBase = base_urls[service];\r\n  if (!endpoint) {\r\n    return { statusCode: 400, body: \"Missing endpoint parameter\" };\r\n  }\r\n  const targetUrl = `${selectedBase.base_url}/${endpoint}`;\r\n  for (const key of API_KEY) {\r\n    try {\r\n      const response = await fetch(targetUrl, {\r\n        headers: {\r\n          'X-RapidAPI-Key': `${key}`,\r\n          'X-RapidAPI-Host': `${API_HOST}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }); \r\n      if (response.ok) {\r\n        console.log(\"res::::\", response);\r\n        return { statusCode: 200, body: JSON.stringify(await response.json()) };\r\n      } \r\n      console.log(\"Key failed, trying next...\");\r\n\r\n    } catch (error) {\r\n      console.log(\"Error fetching data:\", error.message);\r\n      return { statusCode: 500, body: JSON.stringify({ error: error.message }) };\r\n    }\r\n  }\r\n  return { statusCode: 500, body: \"All API keys limit.\" }\r\n};"],
  "mappings": ";AACA,QAAQ,UAAU,eAAgB,OAAO;AAEvC,QAAM,YAAY;AAAA,IAChB,WAAW,EAAE,UAAU,qDAAqD;AAAA,IAC5E,aAAa,EAAE,UAAU,qDAAqD;AAAA,EAChF;AACA,QAAM,UAAU,CAAC,QAAQ,IAAI,kBAAkB,QAAQ,IAAI,eAAe;AAC1E,QAAM,WAAW,QAAQ,IAAI;AAC7B,QAAM,EAAE,UAAU,QAAQ,IAAI,MAAM;AAEpC,QAAM,eAAe,UAAU,OAAO;AACtC,MAAI,CAAC,UAAU;AACb,WAAO,EAAE,YAAY,KAAK,MAAM,6BAA6B;AAAA,EAC/D;AACA,QAAM,YAAY,GAAG,aAAa,QAAQ,IAAI,QAAQ;AACtD,aAAW,OAAO,SAAS;AACzB,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,WAAW;AAAA,QACtC,SAAS;AAAA,UACP,kBAAkB,GAAG,GAAG;AAAA,UACxB,mBAAmB,GAAG,QAAQ;AAAA,UAC9B,gBAAgB;AAAA,QAClB;AAAA,MACF,CAAC;AACD,UAAI,SAAS,IAAI;AACf,gBAAQ,IAAI,WAAW,QAAQ;AAC/B,eAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,MAAM,SAAS,KAAK,CAAC,EAAE;AAAA,MACxE;AACA,cAAQ,IAAI,4BAA4B;AAAA,IAE1C,SAAS,OAAO;AACd,cAAQ,IAAI,wBAAwB,MAAM,OAAO;AACjD,aAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,EAAE,OAAO,MAAM,QAAQ,CAAC,EAAE;AAAA,IAC3E;AAAA,EACF;AACA,SAAO,EAAE,YAAY,KAAK,MAAM,sBAAsB;AACxD;",
  "names": []
}
